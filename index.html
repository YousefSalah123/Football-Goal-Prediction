<!DOCTYPE html>
<html lang="en" class="dark"> <!-- Default to dark mode -->

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Goal Predictor AI - Predict Critical Moments</title>

    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        // Set up Tailwind to use 'class' for dark mode
        tailwind.config = {
            darkMode: 'class',
        }
    </script>

    <!-- Google Fonts: Exo 2 (A modern, sporty font) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Exo+2:wght@400;600;700;800&display=swap" rel="stylesheet">

    <!-- Chart.js CDN (For the analytics chart) -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        /* Use the custom font */
        body {
            font-family: 'Exo S 2', sans-serif;
            transition: background-color 0.3s ease-in-out, color 0.3s ease-in-out;
        }

        /* Hide scrollbar */
        ::-webkit-scrollbar {
            width: 0;
            background: transparent;
        }

        /* Custom loader animation */
        .football-loader {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background-image: url('https://upload.wikimedia.org/wikipedia/commons/d/d3/Soccerball.svg');
            background-size: cover;
            animation: spin 1s linear infinite, bounce 1.5s ease-in-out infinite;
        }

        @keyframes spin {
            100% {
                transform: rotate(360deg);
            }
        }

        @keyframes bounce {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-20px);
            }
        }

        /* Shake animation for the result box */
        @keyframes shake {

            0%,
            100% {
                transform: translateX(0);
            }

            10%,
            30%,
            50%,
            70%,
            90% {
                transform: translateX(-5px);
            }

            20%,
            40%,
            60%,
            80% {
                transform: translateX(5px);
            }
        }

        /* Styling for the new result boxes */
        .result-box {
            padding: 1rem 2rem;
            border-radius: 0.75rem;
            font-size: 2.25rem;
            font-weight: 800;
            display: inline-flex;
            align-items: center;
            gap: 0.75rem;
            animation: shake 0.5s ease-in-out;
            border: 2px solid transparent;
        }

        .goal-box {
            background-color: #166534;
            /* dark green */
            color: #f0fdf4;
            /* light green text */
            border-color: #22c55e;
            box-shadow: 0 0 15px rgba(34, 197, 94, 0.8);
        }

        .miss-box {
            background-color: #4c0519;
            /* dark red */
            color: #fff1f2;
            /* light red text */
            border-color: #f43f5e;
            box-shadow: 0 0 15px rgba(244, 63, 94, 0.8);
        }
    </style>
</head>

<body class="bg-gray-100 dark:bg-gray-900 text-gray-800 dark:text-gray-200 overflow-x-hidden">

    <!-- Header and Navigation -->
    <header
        class="fixed top-0 left-0 right-0 z-50 bg-white/80 dark:bg-black/30 backdrop-blur-sm border-b border-gray-200 dark:border-gray-700/50">
        <nav class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center">
                    <div class="flex-shrink-0">
                        <svg class="w-10 h-10 text-green-500 dark:text-green-400" fill="none" stroke="currentColor"
                            viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M11.933 12.8a1 1 0 000-1.6L6.6 7.2A1 1 0 005 8v8a1 1 0 001.6.8l5.333-4zM19.933 12.8a1 1 0 000-1.6l-5.333-4A1 1 0 0013 8v8a1 1 0 001.6.8l5.333-4z">
                            </path>
                        </svg>
                    </div>
                    <div class="hidden md:block">
                        <h1 class="text-xl font-bold text-gray-900 dark:text-white ml-3">Goal Predictor AI</h1>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="hidden md:block">
                        <div class="ml-10 flex items-baseline space-x-4">
                            <a href="#" onclick="showPage('home')"
                                class="nav-link active px-3 py-2 rounded-md text-sm font-medium">Home</a>
                            <a href="#" onclick="showPage('analytics')"
                                class="nav-link px-3 py-2 rounded-md text-sm font-medium">Analytics</a>
                            <a href="#" onclick="showPage('about')"
                                class="nav-link px-3 py-2 rounded-md text-sm font-medium">About</a>
                        </div>
                    </div>
                    <!-- Theme Toggle Button -->
                    <button id="theme-toggle"
                        class="ml-4 p-2 rounded-md text-gray-500 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700 focus:outline-none">
                        <svg id="theme-toggle-dark-icon" class="hidden h-6 w-6" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z">
                            </path>
                        </svg>
                        <svg id="theme-toggle-light-icon" class="hidden h-6 w-6" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z">
                            </path>
                        </svg>
                    </button>
                    <div class="md:hidden">
                        <button id="mobile-menu-button"
                            class="inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-white hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-white">
                            <svg class="h-6 w-6" stroke="currentColor" fill="none" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M4 6h16M4 12h16M4 18h16"></path>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
            <div id="mobile-menu" class="md:hidden hidden pb-3">
                <a href="#" onclick="showPage('home')"
                    class="nav-link active block px-3 py-2 rounded-md text-base font-medium">Home</a>
                <a href="#" onclick="showPage('analytics')"
                    class="nav-link block px-3 py-2 rounded-md text-base font-medium">Analytics</a>
                <a href="#" onclick="showPage('about')"
                    class="nav-link block px-3 py-2 rounded-md text-base font-medium">About</a>
            </div>
        </nav>
    </header>

    <main class="pt-24 container mx-auto px-4 sm:px-6 lg:px-8">
        <!-- Page: Home -->
        <div id="home" class="page min-h-[calc(100vh-100px)]">
            <div class="text-center mb-12">
                <h2 class="text-4xl md:text-5xl font-extrabold text-gray-900 dark:text-white">Will It Be A Goal?</h2>
                <p class="mt-4 text-lg text-gray-600 dark:text-gray-400 max-w-2xl mx-auto">Upload an image of a critical
                    moment - a shot, penalty, or free kick - and let our AI predict the outcome with stunning accuracy!
                </p>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 items-start">
                <!-- Upload Area -->
                <div id="upload-container"
                    class="bg-white dark:bg-gray-900/50 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-2xl p-8 text-center cursor-pointer transition-all duration-300 hover:border-green-500 dark:hover:bg-gray-800/60 flex flex-col justify-center items-center min-h-[300px]">
                    <input type="file" id="file-input" class="hidden" accept="image/*">
                    <svg class="w-16 h-16 mx-auto text-gray-400 dark:text-gray-500 mb-4" fill="none"
                        stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M7 16a4 4 0 01-4-4V7a4 4 0 014-4h10a4 4 0 014 4v5a4 4 0 01-4 4H7z"></path>
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                    </svg>
                    <p class="text-gray-700 dark:text-gray-300 font-semibold">Drag & Drop Image Here</p>
                    <p class="text-gray-500 dark:text-gray-500 text-sm mt-1">or click to select</p>
                    <p class="text-xs text-gray-400 dark:text-gray-600 mt-4">Supports: JPG, PNG, WEBP</p>
                </div>

                <!-- Preview & Result Area -->
                <div id="result-container"
                    class="bg-white dark:bg-gray-900/50 rounded-2xl p-6 border border-gray-200 dark:border-gray-700/50 min-h-[300px] flex flex-col justify-center items-center">
                    <div id="image-preview-wrapper" class="hidden text-center w-full">
                        <h3 class="text-xl font-bold mb-4 text-gray-900 dark:text-white">Uploaded Image</h3>
                        <img id="image-preview" src="#" alt="Preview"
                            class="max-w-full max-h-64 mx-auto rounded-lg shadow-lg">
                        <button id="predict-btn"
                            class="w-full mt-6 py-3 px-6 bg-green-600 text-white font-bold rounded-lg shadow-lg hover:bg-green-700 transition-all duration-300 transform hover:scale-105">
                            Predict Now!
                        </button>
                    </div>
                    <div id="loader" class="hidden flex flex-col items-center justify-center h-full">
                        <div class="football-loader"></div>
                        <p class="mt-4 text-lg animate-pulse">Analyzing...</p>
                    </div>
                    <div id="prediction-result" class="hidden text-center">
                        <!-- Content will be injected by JS -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Page: Analytics -->
        <div id="analytics" class="page hidden min-h-screen">
            <div class="text-center mb-12">
                <h2 class="text-4xl md:text-5xl font-extrabold text-gray-900 dark:text-white">Model & Dataset Analytics
                </h2>
                <p class="mt-4 text-lg text-gray-600 dark:text-gray-400 max-w-2xl mx-auto">A detailed breakdown of the
                    model's performance metrics and the dataset it was trained on.</p>
            </div>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <!-- Model Performance -->
                <div
                    class="bg-white dark:bg-gray-900/50 rounded-2xl p-6 border border-gray-200 dark:border-gray-700/50">
                    <h3 class="text-2xl font-bold text-green-600 dark:text-green-400 mb-4">Model Performance</h3>
                    <div class="grid grid-cols-2 gap-4 text-center">
                        <div class="bg-gray-100 dark:bg-gray-800/60 p-4 rounded-lg">
                            <p class="text-sm text-gray-500 dark:text-gray-400">Accuracy</p>
                            <p class="text-3xl font-bold text-gray-900 dark:text-white">92.5%</p>
                        </div>
                        <div class="bg-gray-100 dark:bg-gray-800/60 p-4 rounded-lg">
                            <p class="text-sm text-gray-500 dark:text-gray-400">Precision</p>
                            <p class="text-3xl font-bold text-gray-900 dark:text-white">94.1%</p>
                        </div>
                        <div class="bg-gray-100 dark:bg-gray-800/60 p-4 rounded-lg">
                            <p class="text-sm text-gray-500 dark:text-gray-400">Recall</p>
                            <p class="text-3xl font-bold text-gray-900 dark:text-white">91.8%</p>
                        </div>
                        <div class="bg-gray-100 dark:bg-gray-800/60 p-4 rounded-lg">
                            <p class="text-sm text-gray-500 dark:text-gray-400">F1-Score</p>
                            <p class="text-3xl font-bold text-gray-900 dark:text-white">92.9%</p>
                        </div>
                    </div>
                </div>

                <!-- Dataset Overview -->
                <div
                    class="bg-white dark:bg-gray-900/50 rounded-2xl p-6 border border-gray-200 dark:border-gray-700/50">
                    <h3 class="text-2xl font-bold text-green-600 dark:text-green-400 mb-4">Dataset Overview</h3>
                    <div class="flex items-center justify-around">
                        <div class="text-center">
                            <p class="text-sm text-gray-500 dark:text-gray-400">Total Images</p>
                            <p class="text-5xl font-bold text-gray-900 dark:text-white">13,000</p>
                        </div>
                        <div class="w-40 h-40">
                            <canvas id="datasetDistributionChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Confusion Matrix -->
                <div
                    class="lg:col-span-2 bg-white dark:bg-gray-900/50 rounded-2xl p-6 border border-gray-200 dark:border-gray-700/50">
                    <h3 class="text-2xl font-bold text-green-600 dark:text-green-400 mb-4 text-center">Confusion Matrix
                    </h3>
                    <div class="flex justify-center items-center">
                        <div class="relative">
                            <div
                                class="grid grid-cols-2 gap-px bg-gray-300 dark:bg-gray-600 w-64 h-64 text-center font-bold">
                                <div
                                    class="bg-gray-100 dark:bg-gray-800 flex flex-col justify-center items-center p-2 text-gray-900 dark:text-white">
                                    <span class="text-xs text-green-600 dark:text-green-400">True Positive</span>
                                    <span class="text-2xl">5950</span>
                                    <span>(Goal)</span>
                                </div>
                                <div
                                    class="bg-gray-100 dark:bg-gray-800 flex flex-col justify-center items-center p-2 text-gray-900 dark:text-white">
                                    <span class="text-xs text-red-600 dark:text-red-400">False Positive</span>
                                    <span class="text-2xl">350</span>
                                    <span>(Not Goal)</span>
                                </div>
                                <div
                                    class="bg-gray-100 dark:bg-gray-800 flex flex-col justify-center items-center p-2 text-gray-900 dark:text-white">
                                    <span class="text-xs text-red-600 dark:text-red-400">False Negative</span>
                                    <span class="text-2xl">530</span>
                                    <span>(Goal)</span>
                                </div>
                                <div
                                    class="bg-gray-100 dark:bg-gray-800 flex flex-col justify-center items-center p-2 text-gray-900 dark:text-white">
                                    <span class="text-xs text-green-600 dark:text-green-400">True Negative</span>
                                    <span class="text-2xl">6170</span>
                                    <span>(Not Goal)</span>
                                </div>
                            </div>
                            <div
                                class="absolute -left-28 top-1/2 -translate-y-1/2 text-center text-sm transform -rotate-90">
                                Predicted Class</div>
                            <div class="absolute -bottom-10 left-1/2 -translate-x-1/2 text-center text-sm">Actual Class
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Page: About -->
        <div id="about" class="page hidden min-h-screen">
            <div class="text-center mb-12">
                <h2 class="text-4xl md:text-5xl font-extrabold text-gray-900 dark:text-white">About The Project</h2>
            </div>
            <div class="space-y-8 max-w-4xl mx-auto">
                <div
                    class="bg-white dark:bg-gray-900/50 rounded-2xl p-6 border border-gray-200 dark:border-gray-700/50">
                    <h3 class="text-2xl font-bold text-green-600 dark:text-green-400 mb-3">The Idea</h3>
                    <p class="text-gray-700 dark:text-gray-300">This project uses deep learning to analyze football
                        match images and predict the outcome of critical moments like shots, penalties, free kicks, and
                        corners. The model analyzes various factors in the image such as shot angle, goalkeeper's
                        position, and defender density.</p>
                </div>
                <div
                    class="bg-white dark:bg-gray-900/50 rounded-2xl p-6 border border-gray-200 dark:border-gray-700/50">
                    <h3 class="text-2xl font-bold text-green-600 dark:text-green-400 mb-3">Data & Model</h3>
                    <p class="text-gray-700 dark:text-gray-300">The model was trained on a massive dataset of 13,000
                        images from diverse shooting scenarios. We used a Binary Classification model based on a
                        Convolutional Neural Network (CNN) to achieve the best possible prediction accuracy.</p>
                </div>
                <div
                    class="bg-white dark:bg-gray-900/50 rounded-2xl p-6 border border-gray-200 dark:border-gray-700/50">
                    <h3 class="text-2xl font-bold text-green-600 dark:text-green-400 mb-3">The Team</h3>
                    <div class="flex flex-wrap justify-center gap-8 mt-4">
                        <div class="text-center">
                            <div style="background-image: url('images/yousef.jpg'); background-size: cover; background-position: center;"
                                class="w-24 h-24 rounded-full mx-auto mb-2 border-2 border-green-500"></div>
                            <p class="font-bold">Yousef Salah Nage</p>
                            <p class="text-sm text-gray-500 dark:text-gray-400">(GUI & Deployment)</p>
                        </div>
                        <div class="text-center">
                            <div
                                class="w-24 h-24 bg-gray-200 dark:bg-gray-700 rounded-full mx-auto mb-2 flex items-center justify-center">
                                <svg class="w-12 h-12 text-gray-400 dark:text-gray-500" fill="none"
                                    stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                                </svg></div>
                            <p class="font-bold">Team Member 2</p>
                        </div>
                        <div class="text-center">
                            <div
                                class="w-24 h-24 bg-gray-200 dark:bg-gray-700 rounded-full mx-auto mb-2 flex items-center justify-center">
                                <svg class="w-12 h-12 text-gray-400 dark:text-gray-500" fill="none"
                                    stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                                </svg></div>
                            <p class="font-bold">Team Member 3</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        // --- UI Elements ---
        const pages = document.querySelectorAll('.page');
        const navLinks = document.querySelectorAll('.nav-link');
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');

        const uploadContainer = document.getElementById('upload-container');
        const fileInput = document.getElementById('file-input');
        const imagePreviewWrapper = document.getElementById('image-preview-wrapper');
        const imagePreview = document.getElementById('image-preview');
        const predictBtn = document.getElementById('predict-btn');
        const loader = document.getElementById('loader');
        const predictionResult = document.getElementById('prediction-result');

        const themeToggleBtn = document.getElementById('theme-toggle');
        const themeToggleDarkIcon = document.getElementById('theme-toggle-dark-icon');
        const themeToggleLightIcon = document.getElementById('theme-toggle-light-icon');

        // --- Theme Toggle Logic ---
        function applyTheme() {
            if (localStorage.getItem('color-theme') === 'dark' || (!('color-theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                document.documentElement.classList.add('dark');
                themeToggleLightIcon.classList.remove('hidden');
                themeToggleDarkIcon.classList.add('hidden');
            } else {
                document.documentElement.classList.remove('dark');
                themeToggleDarkIcon.classList.remove('hidden');
                themeToggleLightIcon.classList.add('hidden');
            }
        }

        applyTheme();

        themeToggleBtn.addEventListener('click', function () {
            themeToggleDarkIcon.classList.toggle('hidden');
            themeToggleLightIcon.classList.toggle('hidden');

            if (localStorage.getItem('color-theme')) {
                if (localStorage.getItem('color-theme') === 'light') {
                    document.documentElement.classList.add('dark');
                    localStorage.setItem('color-theme', 'dark');
                } else {
                    document.documentElement.classList.remove('dark');
                    localStorage.setItem('color-theme', 'light');
                }
            } else {
                if (document.documentElement.classList.contains('dark')) {
                    document.documentElement.classList.remove('dark');
                    localStorage.setItem('color-theme', 'light');
                } else {
                    document.documentElement.classList.add('dark');
                    localStorage.setItem('color-theme', 'dark');
                }
            }
            if (document.getElementById('analytics').classList.contains('hidden') === false) {
                renderAnalyticsCharts();
            }
        });

        // --- Page Navigation Logic ---
        function showPage(pageId) {
            pages.forEach(page => page.classList.add('hidden'));
            document.getElementById(pageId).classList.remove('hidden');

            const activeClasses = ['bg-green-600', 'text-white'];
            const inactiveClasses = ['text-gray-500', 'dark:text-gray-300', 'hover:bg-gray-200', 'dark:hover:bg-gray-700', 'hover:text-gray-900', 'dark:hover:text-white'];

            navLinks.forEach(link => {
                link.classList.remove(...activeClasses);
                link.classList.add(...inactiveClasses);

                if (link.getAttribute('onclick') === `showPage('${pageId}')`) {
                    link.classList.add(...activeClasses);
                    link.classList.remove(...inactiveClasses);
                }
            });
            mobileMenu.classList.add('hidden');

            if (pageId === 'analytics') {
                renderAnalyticsCharts();
            }
        }

        mobileMenuButton.addEventListener('click', () => {
            mobileMenu.classList.toggle('hidden');
        });


        // --- Image Upload Logic ---
        uploadContainer.addEventListener('click', () => fileInput.click());

        uploadContainer.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadContainer.classList.add('border-green-500');
        });

        uploadContainer.addEventListener('dragleave', () => {
            uploadContainer.classList.remove('border-green-500');
        });

        uploadContainer.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadContainer.classList.remove('border-green-500');
            const files = e.dataTransfer.files;
            if (files.length > 0) {
                fileInput.files = files;
                handleFile(files[0]);
            }
        });

        fileInput.addEventListener('change', (e) => {
            if (e.target.files.length > 0) {
                handleFile(e.target.files[0]);
            }
        });

        function handleFile(file) {
            const reader = new FileReader();
            reader.onload = function (e) {
                imagePreview.src = e.target.result;
                imagePreviewWrapper.classList.remove('hidden');
                predictionResult.classList.add('hidden');
                loader.classList.add('hidden');
            }
            reader.readAsDataURL(file);
        }

        // --- Prediction Logic (Simulation) ---
        predictBtn.addEventListener('click', () => {
            imagePreviewWrapper.classList.add('hidden');
            loader.classList.remove('hidden');
            predictionResult.classList.add('hidden');

            setTimeout(() => {
                const isGoal = Math.random() > 0.5;
                const confidence = Math.floor(Math.random() * (99 - 80 + 1) + 80);
                displayResult(isGoal, confidence);
                loader.classList.add('hidden');
                predictionResult.classList.remove('hidden');
            }, 3000);
        });

        function displayResult(isGoal, confidence) {
            let resultHTML = '';
            if (isGoal) {
                resultHTML = `
                    <div class="result-box goal-box">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 21v-4a2 2 0 0 1 2-2h0a2 2 0 0 1 2 2v4"/><path d="M21 21H3"/><path d="M21 3H3v11a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V3z"/><path d="M12 12a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/></svg>
                        <span>GOAL!</span>
                    </div>
                    <p class="mt-6 text-lg">with a confidence of <span class="font-bold text-gray-900 dark:text-white">${confidence}%</span></p>
                    <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5 mt-2">
                        <div class="bg-green-500 h-2.5 rounded-full" style="width: ${confidence}%"></div>
                    </div>
                `;
            } else {
                resultHTML = `
                     <div class="result-box miss-box">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="3"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" /></svg>
                        <span>MISS!</span>
                    </div>
                     <p class="mt-6 text-lg">with a confidence of <span class="font-bold text-gray-900 dark:text-white">${confidence}%</span></p>
                     <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5 mt-2">
                        <div class="bg-red-500 h-2.5 rounded-full" style="width: ${confidence}%"></div>
                    </div>
                `;
            }
            resultHTML += `<button onclick="resetUI()" class="mt-8 py-2 px-5 bg-gray-200 hover:bg-gray-300 text-gray-800 dark:bg-gray-600 dark:hover:bg-gray-700 dark:text-white font-semibold rounded-lg transition-colors">Analyze Another Image</button>`;
            predictionResult.innerHTML = resultHTML;
        }

        function resetUI() {
            predictionResult.classList.add('hidden');
            imagePreviewWrapper.classList.add('hidden');
            imagePreview.src = '#';
            fileInput.value = '';
        }

        // --- Chart Logic ---
        let datasetDistributionChart = null;
        function renderAnalyticsCharts() {
            const isDarkMode = document.documentElement.classList.contains('dark');
            const textColor = isDarkMode ? 'white' : '#1f2937'; // dark: white, light: gray-800

            const pieCtx = document.getElementById('datasetDistributionChart').getContext('2d');
            if (datasetDistributionChart) {
                datasetDistributionChart.destroy();
            }
            datasetDistributionChart = new Chart(pieCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Goals (49.8%)', 'Missed (50.2%)'],
                    datasets: [{
                        data: [6480, 6520],
                        backgroundColor: ['rgba(34, 197, 94, 0.7)', 'rgba(239, 68, 68, 0.7)'],
                        borderColor: [isDarkMode ? '#1f2937' : '#ffffff', isDarkMode ? '#1f2937' : '#ffffff'],
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: { display: false },
                        title: {
                            display: true,
                            text: 'Dataset Class Distribution',
                            color: textColor,
                            font: { size: 14 }
                        }
                    }
                }
            });
        }

        // --- Run on page load ---
        document.addEventListener('DOMContentLoaded', () => {
            showPage('home');
        });

    </script>
</body>

</html>